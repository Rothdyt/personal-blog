<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.41" />
  <meta name="author" content="Yutong Dai">

  
  
  
  
    
      
    
  
  <meta name="description" content="Motivation Solutions Download Uncompress data files Load libsvm format data Complete Code    Motivation I’m using the datasets libsvm to do some numerical experiments. The sizes of datasets, like epsilon1, are of severalGBs. So it is hard to play with the data on my desktop. I am lucky to run the experiments on a server. So my workflow is:
Download datasets on the server. Preprocess datastes. Run experiments.">

  
  <link rel="alternate" hreflang="en-us" href="/post/en/get-data-from-website/">

  


  

  
  
  <meta name="theme-color" content="hsl((9,62%,53%))">
  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Yutong Dai | 戴宇童">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Yutong Dai | 戴宇童">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/en/get-data-from-website/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Yutong Dai | 戴宇童">
  <meta property="og:url" content="/post/en/get-data-from-website/">
  <meta property="og:title" content="Get Data from Website | Yutong Dai | 戴宇童">
  <meta property="og:description" content="Motivation Solutions Download Uncompress data files Load libsvm format data Complete Code    Motivation I’m using the datasets libsvm to do some numerical experiments. The sizes of datasets, like epsilon1, are of severalGBs. So it is hard to play with the data on my desktop. I am lucky to run the experiments on a server. So my workflow is:
Download datasets on the server. Preprocess datastes. Run experiments.">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2018-05-31T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2018-06-02T13:05:31&#43;08:00">
  

  
  

  <title>Get Data from Website | Yutong Dai | 戴宇童</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" class="dark">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/"><img src="/img/avatar.png" alt="Yutong Dai | 戴宇童"></a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#gallery">
            
            <span>Gallery</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/files/pdf/resume.pdf">
            
            <span>Resume</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#resources">
            
            <span>Resources</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Get Data from Website</h1>
    
    <h3 class="author">Yutong Dai</h3>
    

    

<div class="article-metadata">

  <span class="article-date">
    
        Last updated on
    
    <time datetime="2018-05-31 00:00:00 &#43;0000 UTC" itemprop="datePublished dateModified">
      2018-06-02
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Yutong Dai">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    2 min read
  </span>
  

  
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/r-programming/">R-Programming</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Get%20Data%20from%20Website&amp;url=%2fpost%2fen%2fget-data-from-website%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fen%2fget-data-from-website%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fen%2fget-data-from-website%2f&amp;title=Get%20Data%20from%20Website"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fen%2fget-data-from-website%2f&amp;title=Get%20Data%20from%20Website"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Get%20Data%20from%20Website&amp;body=%2fpost%2fen%2fget-data-from-website%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


    <div class="article-style" itemprop="articleBody">
      <div id="TOC">
<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#solutions">Solutions</a><ul>
<li><a href="#download">Download</a></li>
<li><a href="#uncompress-data-files">Uncompress data files</a></li>
<li><a href="#load-libsvm-format-data">Load libsvm format data</a></li>
<li><a href="#complete-code">Complete Code</a></li>
</ul></li>
</ul>
</div>

<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>I’m using the datasets <a href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/">libsvm</a> to do some numerical experiments. The sizes of datasets, like epsilon<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, are of severalGBs. So it is hard to play with the data on my desktop. I am lucky to run the experiments on a server. So my workflow is:</p>
<ol style="list-style-type: decimal">
<li>Download datasets on the server.</li>
<li>Preprocess datastes.</li>
<li>Run experiments.</li>
</ol>
<p>The problems I encounted are</p>
<ol style="list-style-type: decimal">
<li>How to use <code>R</code> functions to download data?</li>
<li>Since dataset files are compressed, how to uncompresse them?</li>
<li>How to read dataset are of the <code>libsvm</code> format?</li>
</ol>
</div>
<div id="solutions" class="section level1">
<h1>Solutions</h1>
<p>If you only care about the way to download datasets from R, then you can stop once finish reading the following subsection.</p>
<div id="download" class="section level2">
<h2>Download</h2>
<p>Use built-in function <code>download.file</code>, one can finish the task.</p>
<pre class="r"><code>download.file(target_path, path_filename_extension)</code></pre>
<p>For example,</p>
<pre class="r"><code>download.file(https://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/binary/epsilon_normalized.bz2, &quot;./data/epsilon_normalized.bz2&quot;)</code></pre>
</div>
<div id="uncompress-data-files" class="section level2">
<h2>Uncompress data files</h2>
<p>Changce are that you datasets are compressed in <code>.zip</code>, <code>.bz2</code> and etc. formats, so you cannot directly load your data into the memory. You can use the function <code>bunzip2</code> from the <code>R.utils</code> packages.</p>
<pre class="r"><code>bunzip2(path_filet_to_uncompress, path_file_to_save, remove = FALSE, skip = TRUE)</code></pre>
<ul>
<li>remove: If TRUE, the compressed file will be removed once uncompression finished.</li>
<li>skip: If TRUE and the output file already exists, the output file is returned as is.</li>
</ul>
<p>For example,</p>
<pre><code>download.file(&quot;./data/epsilon_normalized.bz2&quot;, &quot;./data/epsilon_normalized&quot;)</code></pre>
<p>Here, the original dataset file <code>epsilon_normalized</code> has no extension.</p>
</div>
<div id="load-libsvm-format-data" class="section level2">
<h2>Load libsvm format data</h2>
<p>The libsvm format data is of form</p>
<pre><code>&lt;label&gt; &lt;index 1&gt;:&lt;value 1&gt; &lt;index 2&gt;:&lt;value 2&gt; ... &lt;index n&gt;:&lt;value n&gt;</code></pre>
<p>For example,</p>
<pre><code>1 1:12 2:34 3:56
2 1:98 2:76 3:65</code></pre>
<p>For more information, please refer to this <a href="https://stats.stackexchange.com/questions/61328/libsvm-data-format">post</a>.</p>
<p>We can use the <code>read.matrix.csr</code> function from the <code>e1071</code> package.</p>
<pre class="r"><code>data &lt;- read.matrix.csr(file, fac=TRUE)</code></pre>
<p>For example,</p>
<pre class="r"><code>data &lt;- read.matrix.csr(&quot;./data/epsilon_normalized&quot;, fac=TRUE)</code></pre>
<p>Note that <code>data</code> here is a list and matrix are stored in <code>sparse matrix</code> format. We can use <code>data$x</code> and <code>data$y</code> to extract the feature matrix and the label vector respectively.</p>
</div>
<div id="complete-code" class="section level2">
<h2>Complete Code</h2>
<p>The complete code to download and uncompress data files is</p>
<pre class="r"><code>get_data &lt;- function(target_path, save_path, save_name, extension, unzip=TRUE){
  path_file &lt;- paste(save_path,save_name,sep=&quot;/&quot;)
  path_file_extension &lt;- paste(path_file, extension, sep=&quot;.&quot;)
  download.file(target_path, path_file_extension)
  if (unzip){
    require(R.utils)
    bunzip2(path_file_extension, path_file, remove = FALSE, skip = TRUE)
    print(&quot;unzip finished!&quot;)
  }
  print(paste(&quot;data is strored at:&quot;, save_path))
}</code></pre>
<p>The complete code to load <code>libsvm</code> format data is</p>
<pre class="r"><code>process_data &lt;- function(file, convert_to_factor=FALSE){
  require(e1071)
  require(SparseM)
  print(&quot;loading data&quot;)
  data &lt;- read.matrix.csr(file, fac=convert_to_factor)
  print(&quot;loading finished&quot;)
  x &lt;- as.matrix(data$x)
  print(&quot;x was conveted to dense matrix form&quot;)
  y &lt;- as.matrix(data$y)
  results &lt;- list(x=x,y=y)
  return(results)
}</code></pre>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/binary/epsilon_normalized.bz2" class="uri">https://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/binary/epsilon_normalized.bz2</a><a href="#fnref1">↩</a></p></li>
</ol>
</div>

    </div>

    


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/r-tricks/">R-tricks</a>
  
</div>




    
    

    
    <div class="article-widget">
      <div class="post-nav">
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/post/en/play-with-sparse-matrix/" rel="next">Play with Sparse Matrix</a>
  </div>
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/post/en/bookdown-syntax/" rel="prev">Bookdown Syntax</a>
  </div>
  
</div>

    </div>
    

    


  </div>
</article>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/tex.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

